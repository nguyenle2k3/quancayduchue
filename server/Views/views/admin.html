<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <title>ADMIN</title>
    <meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no' name='viewport'>
    <!-- Bootstrap 3.3.2 -->
    <link href="/cssad/bootstrap.css" rel="stylesheet" type="text/css" />
    <!-- FontAwesome 4.3.0 -->
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet"
        type="text/css" />
    <link href="/cssad/AdminLTE.css" rel="stylesheet" type="text/css" />

    <link href="/cssad/custom.css" rel="stylesheet" type="text/css" />
    <link rel="shortcut icon" href="/img/logo_DH.png" type="image/x-icon" />
    <script src="/jsad/jQuery-2.1.3.min.js"></script>
    <script src="/jsad/admin.js" type="text/javascript"></script>
    <script src="/jsad/admin1.js" type="text/javascript"></script>

</head>

<body>
    <div class="wrapper">

        <header class="main-header">
            <!-- Logo -->
            <a href="" class="logo">
                <div class="pull-left image">
                    <img src="/img/logo_DH.png" class="img-circle" alt="User Image" />
                </div>
                <b class="nameit"> Đức Huệ </b>
            </a>
            <nav class="navbar navbar-static-top" role="navigation">
                <!-- Sidebar toggle button-->
                <a href="#" class="sidebar-toggle" data-toggle="offcanvas" role="button">
                    <span class="sr-only">.</span>
                </a>

                <div class="navbar-custom-menu">
                    <ul class="nav navbar-nav" style="cursor: pointer;">

                        <li class="dropdown user user-menu logout" id="logoutBT">
                            <a class="dropdown-toggle logout" data-toggle="dropdown">
                                <img src="/img/logo_DH.png" class="user-image" alt="Admin Image" />
                                <span class="hidden-xs logout">ĐĂNG XUẤT</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>
        </header>

        <script>
            const logOutBtn = document.getElementById('logoutBT');
            logOutBtn.addEventListener('click', function (event) {
                event.preventDefault();

                // Create a new XHR object
                const xhttp = new XMLHttpRequest();

                // Define the URL for the GET request
                var url = 'http://127.0.0.1:5000/api/admin/logout';
                // Open a new GET request
                xhttp.open('GET', url, true);

                xhttp.onreadystatechange = function () {
                    if (this.readyState === XMLHttpRequest.DONE && this.status === 200) {
                        window.location.href = 'http://127.0.0.1:5000/';
                    }
                };

                xhttp.send();
            });
        </script>

        <aside class="main-sidebar">
            <!-- sidebar: style can be found in sidebar.less -->
            <section class="sidebar">
                <!-- Sidebar user panel -->
                <div class="user-panel">
                    <div class="pull-left info">
                        <p>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp; Admin</p>
                    </div>
                </div>
                <hr>
                <ul class="sidebar-menu">
                    <li class="header active">Danh Mục Chính</li>

                    <li class="treeview">
                        <a href="#">
                            <span>Quản Lý Món Ăn</span>
                            <i class="fa fa-angle-left pull-right"></i>
                        </a>
                        <ul class="treeview-menu">
                            <li onclick="openADDma()"><a href="#"><i class="fa fa-plus"></i> Thêm Món Ăn</a></li>
                            <li onclick="openSUAma()"><a href="#"><i class="fa fa-adjust"></i> Sửa Món Ăn</a></li>
                            <li onclick="openDELma()"><a href="#"><i class="fa fa-remove"></i> Xóa Món Ăn </a></li>
                        </ul>
                    </li>

                    <li class="treeview">
                        <a href="#">
                            <span>Quản Lý Khuyến Mãi</span>
                            <i class="fa fa-angle-left pull-right"></i>
                        </a>
                        <ul class="treeview-menu">
                            <li onclick="openADDkm()"><a href="#"><i class="fa fa-plus"></i> Thêm Khuyến Mãi</a>
                            </li>
                            <li onclick="openSUAkm()"><a href="#"><i class="fa fa-adjust"></i> Sửa Khuyến Mãi</a></li>
                            <li onclick="openDELkm()"><a href="#"><i class="fa fa-remove"></i> Xóa Khuyến Mãi </a></li>
                        </ul>
                    </li>

                    <li class="treeview">
                        <a href="#">
                            <span>Quản Lý Thông Tin</span> <i class="fa fa-angle-left pull-right"></i>
                        </a>
                        <ul class="treeview-menu">
                            <li onclick="openADDnv()"><a href="#"><i class="fa fa-plus"></i> Thêm Thông Tin</a></li>
                            <li onclick="openSUAnv()"><a href="#"><i class="fa fa-adjust"></i> Sửa Thông Tin</a></li>
                            <li onclick="openDELnv()"><a href="#"><i class="fa fa-remove"></i> Xóa Thông Tin</a></li>
                        </ul>
                    </li>


                </ul>
            </section>
            <!-- /.sidebar -->
        </aside>



        <!-- Right side column. Contains the navbar and content of the page -->
        <div class="content-wrapper">
            <!-- Content Header (Page header) -->
            <section class="content-header">
                <h1>Quản Trị Viên -
                    <small>Control</small>
                </h1>
            </section>
        </div><!-- /.content-wrapper -->

        <footer class="main-footer">
            2023 &copy; developed by AZAOWEN, NguyenLe
        </footer>
    </div><!-- ./wrapper -->

    <!-- Add thong tin -->
    <div id="AddNhanVien" class="AddNhanVien">
        <span class="close" onclick="closeLogin()">&times;</span>
        <h4>Thêm Thông Tin</h4>
        <form id="addTTform"> <!-- addNVform -->


            <div class="user-box">
                <input type="text" name="title" required>
                <label>Tên Cơ Sở <sup style="color: red; font-size: 100%;">*</sup></label>
            </div>

            <div class="user-box">
                <input type="text" name="address" required>
                <label>Địa Chỉ Nhà Hàng <sup style="color: red; font-size: 100%;">*</sup></label>
            </div>

            <div class="user-box">
                <input type="tel" name="phoneNumber" required>
                <label>Số Điện Thoại <sup style="color: red; font-size: 100%;">*</sup></label>
            </div>
            <div class="user-box">
                <input type="email" name="email" required>
                <label>Email <sup style="color: red; font-size: 100%;">*</sup> </label>
            </div>

            <button type="submit" onclick="submitFormAddContact(event)">
                <span></span>
                <span></span>
                <span></span>
                <span></span>
                Thêm
            </button>
        </form>
        <script>
            function submitFormAddContact(event) {
                event.preventDefault(); // Chặn sự kiện submit form mặc định
                const xhr = new XMLHttpRequest();
                const form = document.getElementById("addTTform");
                const outputDiv = document.querySelector('#output');
                xhr.open("POST", "http://127.0.0.1:5000/api/contact/add");
                xhr.setRequestHeader("Content-Type", "application/json");
                xhr.onreadystatechange = function () {
                    if (this.status === 200) {
                        setTimeout(function () {
                            closeLogin();
                        }, 1000);

                        setTimeout(function () {
                            outputDiv.innerHTML = 'Thêm Thông Tin Thành Công!';
                            outputDiv.style.background = 'green';
                            outputDiv.style.color = 'white';
                            outputDiv.style.display = 'block';
                        }, 1000);
                        setTimeout(function () {
                            document.getElementById('output').style.display = 'none';
                        }, 4500);

                    } else {
                        setTimeout(function () {
                            closeLogin();
                        }, 1000);

                        setTimeout(function () {
                            outputDiv.innerHTML = 'Thông Tin Không Hợp Lệ!';
                            outputDiv.style.background = '#de1f18';
                            outputDiv.style.color = 'white';
                            outputDiv.style.display = 'block';
                        }, 1000);
                        setTimeout(function () {
                            document.getElementById('output').style.display = 'none';
                        }, 4500);
                    }
                };

                const formData = new FormData(form);
                const payload = {
                    title: formData.get("title"),
                    address: formData.get("address"),
                    phone: formData.get("phoneNumber"),
                    email: formData.get("email")
                };

                xhr.send(JSON.stringify(payload));
            }
        </script>
    </div>
    <!-- Add thong tin End -->



    <!-- Sua thong tin -->
    <div id="SuaNhanVien" class="SuaNhanVien">
        <span class="close" onclick="closeLogin()">&times;</span>
        <h4>Sửa Thông Tin</h4>
        <form id="suaTTform"> <!-- suaNVform -->

            <div class="user-box">
                <input type="text" name="title" required>
                <label>Tên Cơ Sở <sup style="color: red; font-size: 100%;">*</sup></label>
            </div>

            <div class="user-box">
                <input type="text" name="address" required>
                <label>Địa Chỉ Nhà Hàng <sup style="color: red; font-size: 100%;">*</sup></label>
            </div>

            <div class="user-box">
                <input type="tel" name="phone-number" required>
                <label>Số Điện Thoại <sup style="color: red; font-size: 100%;">*</sup></label>
            </div>
            <div class="user-box">
                <input type="email" name="email" required>
                <label>Email <sup style="color: red; font-size: 100%;">*</sup> </label>
            </div>

            <button type="submit" onclick="submitFormUpdateContact(event)">
                <span></span>
                <span></span>
                <span></span>
                <span></span>
                Sửa
            </button>
        </form>

        <script>
            function submitFormUpdateContact(event) {
                event.preventDefault(); // Chặn sự kiện submit form mặc định
                const xhr = new XMLHttpRequest();
                const form = document.getElementById("suaTTform");
                const outputDiv = document.querySelector('#output');
                xhr.open("POST", "http://127.0.0.1:5000/api/contact/update");
                xhr.setRequestHeader("Content-Type", "application/json");
                xhr.onreadystatechange = function () {
                    if (this.status === 200) {
                        setTimeout(function () {
                            closeLogin();
                        }, 1000);

                        setTimeout(function () {
                            outputDiv.innerHTML = 'Sửa Thông Tin Thành Công!';
                            outputDiv.style.background = 'green';
                            outputDiv.style.color = 'white';
                            outputDiv.style.display = 'block';
                        }, 1000);
                        setTimeout(function () {
                            document.getElementById('output').style.display = 'none';
                        }, 4500);

                    } else {
                        setTimeout(function () {
                            closeLogin();
                        }, 1000);

                        setTimeout(function () {
                            outputDiv.innerHTML = 'Thông Tin Không Hợp Lệ!';
                            outputDiv.style.background = '#de1f18';
                            outputDiv.style.color = 'white';
                            outputDiv.style.display = 'block';
                        }, 1000);
                        setTimeout(function () {
                            document.getElementById('output').style.display = 'none';
                        }, 4500);
                    }
                };

                const formData = new FormData(form);
                const payload = {
                    title: formData.get("title"),
                    address: formData.get("address"),
                    phone: formData.get("phoneNumber"),
                    email: formData.get("email")
                };

                xhr.send(JSON.stringify(payload));
            }
        </script>
    </div>
    <!-- Sua thong tin End-->


    <!-- xoa thong tin -->
    <div id="XoaNhanVien" class="XoaNhanVien">
        <span class="close" onclick="closeLogin()">&times;</span>
        <h4>Xóa Thông Tin</h4>
        <form id="xoaTTform"> <!-- xoaNVform -->

            <div class="user-box">
                <input type="text" name="title" required>
                <label>Tên Cơ Sở <sup style="color: red; font-size: 100%;">*</sup></label>
            </div>

            <button type="submit" onclick="submitFormDeleteContact(event)">
                <span></span>
                <span></span>
                <span></span>
                <span></span>
                Xóa
            </button>
        </form>

        <script>
            function submitFormDeleteContact(event) {
                event.preventDefault(); // Chặn sự kiện submit form mặc định
                const xhr = new XMLHttpRequest();
                const form = document.getElementById("xoaTTform");
                const outputDiv = document.querySelector('#output');
                xhr.open("POST", "http://127.0.0.1:5000/api/contact/delete");
                xhr.setRequestHeader("Content-Type", "application/json");
                xhr.onreadystatechange = function () {
                    if (this.status === 200) {
                        setTimeout(function () {
                            closeLogin();
                        }, 1000);

                        setTimeout(function () {
                            outputDiv.innerHTML = 'Xóa Thông Tin Thành Công!';
                            outputDiv.style.background = 'green';
                            outputDiv.style.color = 'white';
                            outputDiv.style.display = 'block';
                        }, 1000);
                        setTimeout(function () {
                            document.getElementById('output').style.display = 'none';
                        }, 4500);

                    } else {
                        setTimeout(function () {
                            closeLogin();
                        }, 1000);

                        setTimeout(function () {
                            outputDiv.innerHTML = 'Không Tìm Thấy Cơ Sở Cần Xóa';
                            outputDiv.style.background = '#de1f18';
                            outputDiv.style.color = 'white';
                            outputDiv.style.display = 'block';
                        }, 1000);
                        setTimeout(function () {
                            document.getElementById('output').style.display = 'none';
                        }, 4500);
                    }
                };

                const formData = new FormData(form);
                const payload = {
                    title: formData.get("title"),
                };

                xhr.send(JSON.stringify(payload));
            }
        </script>
    </div>
    <!-- xoa thong tin End  -->


    <!-- Add Mon An -->
    <div id="AddMonAn" class="AddMonAn">
        <span class="close" onclick="closeLogin()">&times;</span>
        <h4>Thêm Món Ăn</h4>
        <form id="addMonAnform">
            <div class="user-box">
                <input type="text" name="title" required>
                <label>Tên Món <sup style="color: red; font-size: 100%;">*</sup></label>
            </div>

            <div class="user-box">
                <input type="number" name="price" required min="1">
                <label>Giá Món Ăn <sup style="color: red; font-size: 100%;">*</sup></label>
            </div>

            <label id="ppp">Thể loại món: <sup style="color: red; font-size: 100%;">*</sup></label>
            <div id="split">
                <div class="columneee">
                    <input type="radio" name="tag" value="Lẩu" checked />
                    <p id="ppp">Lẩu </p>
                </div>
                <div class="columneee">
                    <input type="radio" name="tag" value="Nướng" />
                    <p id="ppp">Nướng </p>
                </div>
                <div class="columneee">
                    <input type="radio" name="tag" value="Combo" />
                    <p id="ppp">Combo</p>
                </div>
                <div class="columneee">
                    <input type="radio" name="tag" value="Khác" />
                    <p id="ppp">Khác</p>
                </div>

            </div>

            <div class="user-box">
                <input type="text" name="description">
                <label> Miêu Tả Món Ăn </label>
            </div>

            <button type="submit" onclick="submitFormAddProduct(event)">
                <span></span>
                <span></span>
                <span></span>
                <span></span>
                Thêm
            </button>
        </form>
        <script>

            function submitFormAddProduct(event) {
                event.preventDefault(); // Chặn sự kiện submit form mặc định
                const xhr = new XMLHttpRequest();
                const form = document.getElementById("addMonAnform");
                const outputDiv = document.querySelector('#output');
                xhr.open("POST", "http://127.0.0.1:5000/api/product/add");
                xhr.setRequestHeader("Content-Type", "application/json");
                xhr.onreadystatechange = function () {
                    if (this.readyState === XMLHttpRequest.DONE) {
                        if (this.status === 200) {
                            setTimeout(function () {
                                closeLogin();
                            }, 1000);

                            setTimeout(function () {
                                outputDiv.innerHTML = 'Thêm Món Ăn Thành Công!';
                                outputDiv.style.background = 'green';
                                outputDiv.style.color = 'white';
                                outputDiv.style.display = 'block';
                            }, 1000);
                            setTimeout(function () {
                                document.getElementById('output').style.display = 'none';
                            }, 4500);

                        } else {
                            setTimeout(function () {
                                closeLogin();
                            }, 1000);

                            setTimeout(function () {
                                outputDiv.innerHTML = 'Món Ăn Đã Tồn Tại !';
                                outputDiv.style.background = '#de1f18';
                                outputDiv.style.color = 'white';
                                outputDiv.style.display = 'block';
                            }, 1000);
                            setTimeout(function () {
                                document.getElementById('output').style.display = 'none';
                            }, 4500);
                        }
                    }
                };

                const formData = new FormData(form);
                const payload = {
                    productid: formData.get('productid'),
                    title: formData.get('title'),
                    price: formData.get("price"),
                    tag: formData.get("tag"),
                    description: formData.get("description"),
                };

                xhr.send(JSON.stringify(payload));
            }
        </script>
    </div>
    <!-- Add Mon An End -->



    <!-- Sua Mon An -->
    <div id="SuaMonAn" class="SuaMonAn">
        <span class="close" onclick="closeLogin()">&times;</span>
        <h4>Sửa Món Ăn</h4>
        <form id="suaMonAnform" action='http://127.0.0.1:5000/api/product/update' method="POST">


            <div class="user-box">
                <input type="text" name="productid" required>
                <label> Mã Món Ăn <sup style="color: red; font-size: 100%;">*</sup></label>
            </div>

            <div class="user-box">
                <input type="text" name="title">
                <label>Tên Món </label>
            </div>

            <div class="user-box">
                <input type="number" name="price" min="1">
                <label>Giá Món Ăn </label>
            </div>

            <label id="ppp">Thể loại món: </label>
            <div id="split">
                <div class="columneee">
                    <input type="radio" name="tag" value="Lẩu" checked />
                    <p id="ppp">Lẩu </p>
                </div>
                <div class="columneee">
                    <input type="radio" name="tag" value="Nướng" />
                    <p id="ppp">Nướng </p>
                </div>
                <div class="columneee">
                    <input type="radio" name="tag" value="Combo" />
                    <p id="ppp">Combo</p>
                </div>
                <div class="columneee">
                    <input type="radio" name="tag" value="Khác" />
                    <p id="ppp">Khác</p>
                </div>

            </div>

            <div class="user-box">
                <input type="text" name="description">
                <label> Miêu Tả Món Ăn </label>
            </div>

            <button type="submit" onclick="submitFormUpdateProduct(event)">
                <span></span>
                <span></span>
                <span></span>
                <span></span>
                Sửa
            </button>
        </form>

        <script>

            function submitFormUpdateProduct(event) {
                event.preventDefault(); // Chặn sự kiện submit form mặc định
                const xhr = new XMLHttpRequest();
                const form = document.getElementById("suaMonAnform");
                const outputDiv = document.querySelector('#output');
                xhr.open("POST", "http://127.0.0.1:5000/api/product/update");
                xhr.setRequestHeader("Content-Type", "application/json");
                xhr.onreadystatechange = function () {
                    if (this.readyState === XMLHttpRequest.DONE) {
                        if (this.status === 200) {
                            setTimeout(function () {
                                closeLogin();
                            }, 1000);

                            setTimeout(function () {
                                outputDiv.innerHTML = 'Sửa Món Ăn Thành Công!';
                                outputDiv.style.background = 'green';
                                outputDiv.style.color = 'white';
                                outputDiv.style.display = 'block';
                            }, 1000);
                            setTimeout(function () {
                                document.getElementById('output').style.display = 'none';
                            }, 4500);

                        } else {
                            setTimeout(function () {
                                closeLogin();
                            }, 1000);

                            setTimeout(function () {
                                outputDiv.innerHTML = 'Mã Món Ăn Không Hợp Lệ!';
                                outputDiv.style.background = '#de1f18';
                                outputDiv.style.color = 'white';
                                outputDiv.style.display = 'block';
                            }, 1000);
                            setTimeout(function () {
                                document.getElementById('output').style.display = 'none';
                            }, 4500);
                        }
                    }
                };

                const formData = new FormData(form);
                const payload = {
                    productid: formData.get('productid'),
                    title: formData.get('title'),
                    price: formData.get("price"),
                    tag: formData.get("tag"),
                    description: formData.get("description"),
                };

                xhr.send(JSON.stringify(payload));
            }
        </script>

    </div>
    <!-- Sua Nhan Vien End -->


    <!-- Xoa Mon An -->
    <div id="XoaMonAn" class="XoaMonAn">
        <span class="close" onclick="closeLogin()">&times;</span>
        <h4>Xóa Món Ăn</h4>
        <form id="xoaMonAnform">


            <div class="user-box">
                <input type="text" name="productid" required>
                <label> Mã Món Ăn <sup style="color: red; font-size: 100%;">*</sup></label>
            </div>

            <button type="submit" onclick="submitFormDeleteProduct(event)">
                <span></span>
                <span></span>
                <span></span>
                <span></span>
                Xóa
            </button>
        </form>

        <script>
            function submitFormDeleteProduct(event) {
                event.preventDefault(); // Chặn sự kiện submit form mặc định
                const xhr = new XMLHttpRequest();
                const form = document.getElementById("xoaMonAnform");
                const outputDiv = document.querySelector('#output');
                xhr.open("POST", "http://127.0.0.1:5000/api/product/delete");
                xhr.setRequestHeader("Content-Type", "application/json");
                xhr.onreadystatechange = function () {
                    if (this.readyState === XMLHttpRequest.DONE) {
                        if (this.status === 200) {
                            setTimeout(function () {
                                closeLogin();
                            }, 1000);

                            setTimeout(function () {
                                outputDiv.innerHTML = 'Xoá Món Ăn Thành Công!';
                                outputDiv.style.background = 'green';
                                outputDiv.style.color = 'white';
                                outputDiv.style.display = 'block';
                            }, 1000);
                            setTimeout(function () {
                                document.getElementById('output').style.display = 'none';
                            }, 4500);

                        } else {
                            setTimeout(function () {
                                closeLogin();
                            }, 1000);

                            setTimeout(function () {
                                outputDiv.innerHTML = 'Mã Món Ăn Không Hợp Lệ!';
                                outputDiv.style.background = '#de1f18';
                                outputDiv.style.color = 'white';
                                outputDiv.style.display = 'block';
                            }, 1000);
                            setTimeout(function () {
                                document.getElementById('output').style.display = 'none';
                            }, 4500);
                        }
                    }
                };

                const formData = new FormData(form);
                const payload = {
                    productid: formData.get('productid'),
                };

                xhr.send(JSON.stringify(payload));
            }
        </script>

    </div>
    <!-- Sua Nhan Vien End -->

    <!-- Add Khuyen Mai -->
    <div id="AddKhuyenMai" class="AddKhuyenMai">
        <span class="close" onclick="closeLogin()">&times;</span>
        <h4>Thêm Khuyến Mãi</h4>
        <form id="addKhuyenMaiform">


            <div class="user-box">
                <input type="text" name="title" required>
                <label>Tên Khuyến Mãi <sup style="color: red; font-size: 100%;">*</sup></label>
            </div>


            <div class="user-box">
                <input type="text" name="description" required>
                <label> Mô Tả Khuyến Mãi <sup style="color: red; font-size: 100%;">*</sup> </label>
            </div>

            <div class="user-box">
                <input type="date" name="startTime" class="custom-date" value="2023-05-30">
                <label> Thời Gian Bắt Đầu <sup style="color: red; font-size: 100%;">*</sup> </label>
            </div>

            <div class="user-box">
                <input type="date" name="endTime" class="custom-date" value="2023-06-02">
                <label> Thời Gian Kết Thúc <sup style="color: red; font-size: 100%;">*</sup> </label>
            </div>

            <button type="submit" onclick="submitFormAddPromotion(event)">
                <span></span>
                <span></span>
                <span></span>
                <span></span>
                Thêm
            </button>
        </form>
        <script>

            function submitFormAddPromotion(event) {
                event.preventDefault(); // Chặn sự kiện submit form mặc định
                const xhr = new XMLHttpRequest();
                const form = document.getElementById("addKhuyenMaiform");
                const outputDiv = document.querySelector('#output');
                xhr.open("POST", "http://127.0.0.1:5000/api/promotion/add");
                xhr.setRequestHeader("Content-Type", "application/json");
                xhr.onreadystatechange = function () {
                    if (this.status === 200) {
                        setTimeout(function () {
                            closeLogin();
                        }, 1000);

                        setTimeout(function () {
                            outputDiv.innerHTML = 'Thêm khuyến mãi Thành Công!';
                            outputDiv.style.background = 'green';
                            outputDiv.style.color = 'white';
                            outputDiv.style.display = 'block';
                        }, 1000);
                        setTimeout(function () {
                            document.getElementById('output').style.display = 'none';
                        }, 4500);

                    } else {
                        setTimeout(function () {
                            closeLogin();
                        }, 1000);

                        setTimeout(function () {
                            outputDiv.innerHTML = 'Mã Khuyến Mãi không Hợp Lệ!';
                            outputDiv.style.background = '#de1f18';
                            outputDiv.style.color = 'white';
                            outputDiv.style.display = 'block';
                        }, 1000);
                        setTimeout(function () {
                            document.getElementById('output').style.display = 'none';
                        }, 4500);
                    }
                };

                const formData = new FormData(form);
                const payload = {
                    promotionid: formData.get("promotionid"),
                    title: formData.get("title"),
                    description: formData.get("description"),
                    startTime: formData.get("startTime"),
                    endTime: formData.get("endTime")
                };

                xhr.send(JSON.stringify(payload));
            }
        </script>
    </div>
    <!-- Add Khuyen Mai End -->

    <!-- Sua Khuyen Mai -->
    <div id="SuaKhuyenMai" class="SuaKhuyenMai">
        <span class="close" onclick="closeLogin()">&times;</span>
        <h4>Sửa Khuyến Mãi</h4>
        <form id="suaKhuyenMaiform" action='http://127.0.0.1:5000/api/promotion/update' method="POST">

            <div class="user-box">
                <input type="text" name="promotionid" required>
                <label>Mã Khuyến Mãi <sup style="color: red; font-size: 100%;">*</sup></label>
            </div>

            <div class="user-box">
                <input type="text" name="title">
                <label>Tên Khuyến Mãi </label>
            </div>

            <div class="user-box">
                <input type="text" name="description">
                <label> Mô Tả Khuyến Mãi </label>
            </div>

            <div class="user-box">
                <input type="date" name="startTime" class="custom-date">
                <label> Thời Gian Bắt Đầu </label>
            </div>

            <div class="user-box">
                <input type="date" class="custom-date" name="endTime">
                <label> Thời Gian Kết Thúc </label>
            </div>

            <button type="submit" onclick="submitFormUpdatePromotion(event)">
                <span></span>
                <span></span>
                <span></span>
                <span></span>
                Sửa
            </button>
        </form>
    </div>

    <script>
        function submitFormUpdatePromotion(event) {
            event.preventDefault(); // Chặn sự kiện submit form mặc định
            const xhr = new XMLHttpRequest();
            const form = document.getElementById("suaKhuyenMaiform");
            const outputDiv = document.querySelector('#output');

            xhr.open("POST", "http://127.0.0.1:5000/api/promotion/update");
            xhr.setRequestHeader("Content-Type", "application/json");

            xhr.onreadystatechange = function () {
                if (this.readyState === XMLHttpRequest.DONE) {
                    if (this.status === 200) {
                        setTimeout(function () {
                            closeLogin();
                        }, 1000);

                        setTimeout(function () {
                            outputDiv.innerHTML = 'Sửa Khuyến Mãi Thành Công!';
                            outputDiv.style.background = 'green';
                            outputDiv.style.color = 'white';
                            outputDiv.style.display = 'block';
                        }, 1000);
                        setTimeout(function () {
                            document.getElementById('output').style.display = 'none';
                        }, 4500);

                    } else {
                        setTimeout(function () {
                            closeLogin();
                        }, 1000);

                        setTimeout(function () {
                            outputDiv.innerHTML = 'Mã Khuyến Mãi không Hợp Lệ!';
                            outputDiv.style.background = '#de1f18';
                            outputDiv.style.color = 'white';
                            outputDiv.style.display = 'block';
                        }, 1000);
                        setTimeout(function () {
                            document.getElementById('output').style.display = 'none';
                        }, 4500);
                    }
                }
            };

            const formData = new FormData(form);
            const payload = {
                promotionid: formData.get("promotionid"),
                title: formData.get("title"),
                description: formData.get("description"),
                startTime: formData.get("startTime"),
                endTime: formData.get("endTime")
            };

            xhr.send(JSON.stringify(payload));
        }
    </script>
    <!-- Sua Khuyen Mai End -->

    <!-- Xoa Khuyen Mai -->
    <div id="XoaKhuyenMai" class="XoaKhuyenMai">
        <span class="close" onclick="closeLogin()">&times;</span>
        <h4>Xóa Khuyến Mãi</h4>
        <form id="xoaKhuyenMaiform" action='http://127.0.0.1:5000/api/promotion/delete' method="POST">


            <div class="user-box">
                <input type="text" name="promotionid" required>
                <label>Mã Khuyến Mãi <sup style="color: red; font-size: 100%;">*</sup> </label>
            </div>


            <button type="submit" onclick="submitFormDeletePromotion(event)">
                <span></span>
                <span></span>
                <span></span>
                <span></span>
                Xóa
            </button>
        </form>

    </div>
    <script>
        function submitFormDeletePromotion(event) {
            event.preventDefault(); // Chặn sự kiện submit form mặc định
            const xhr = new XMLHttpRequest();
            const form = document.getElementById("xoaKhuyenMaiform");
            const outputDiv = document.querySelector('#output');

            xhr.open("POST", "http://127.0.0.1:5000/api/promotion/delete");
            xhr.setRequestHeader("Content-Type", "application/json");

            xhr.onreadystatechange = function () {
                if (this.readyState === XMLHttpRequest.DONE) {
                    if (this.status === 200) {
                        setTimeout(function () {
                            closeLogin();
                        }, 1000);

                        setTimeout(function () {
                            outputDiv.innerHTML = 'Xoá Thành Công!';
                            outputDiv.style.background = 'green';
                            outputDiv.style.color = 'white';
                            outputDiv.style.display = 'block';
                        }, 1000);
                        setTimeout(function () {
                            document.getElementById('output').style.display = 'none';
                        }, 4500);

                    } else {
                        setTimeout(function () {
                            closeLogin();
                        }, 1000);

                        setTimeout(function () {
                            outputDiv.innerHTML = 'Mã Khuyến Mãi không Hợp Lệ!';
                            outputDiv.style.background = '#de1f18';
                            outputDiv.style.color = 'white';
                            outputDiv.style.display = 'block';
                        }, 1000);
                        setTimeout(function () {
                            document.getElementById('output').style.display = 'none';
                        }, 4500);
                    }
                }
            };

            const formData = new FormData(form);
            const payload = {
                promotionid: formData.get("promotionid"),
            };

            xhr.send(JSON.stringify(payload));
        }
    </script>
    <!-- Xóa Khuyen Mai End -->


    <div id="output"></div>


    <div id="preloader">
        <div class="loader">
            <div class="face">
                <div class="circle"></div>
            </div>
            <div class="face">
                <div class="circle"></div>
            </div>
        </div>
    </div>

    <script>
        $(window).on('load', function () {
            $("#preloader").fadeOut();
        });
    </script>

</body>

</html>